{"mappings":"kpBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,4Q,sBCAzD,MAAMC,EAAO,CAACC,EAAKC,KACjB,IACE,MAAMC,EAAkBL,KAAKM,UAAUF,GACvCG,aAAaC,QAAQL,EAAKE,EAG5B,CAFE,MAAOI,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,QAC3C,G,mBCNFC,EAAiB,IAAAC,IAAoBf,EAAA,SAAAgB,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,W,MCA5FC,EAAiB,IAAAN,IAAoBf,EAAA,SAAAgB,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,WCe5FhB,EAAkB,WARY,CAC5B,2BACA,2BACA,2BACA,2BACA,2BACA,6BAKF,IAAIkB,EAAc,GAClB,MAAMC,EAAYC,SAASC,cAAc,eACnCC,EAAgBF,SAASC,cAAc,mBAC7CC,EAAcC,MAAMC,QAAU,OAG9B,MAmEMC,EAAaC,IACjBA,EAAMC,SAAQC,KACZ,EAAAC,EAAAC,aAAYF,GACTG,MAAKC,GAtEO,CAAAC,IACjB,MAAMC,IAAEA,EAAGC,WAAEA,EAAUC,MAAEA,EAAKC,UAAEA,EAASC,YAAEA,EAAWC,OAAEA,EAAMC,UAAEA,GAAcP,EACxEQ,EAAS,8KAGuDP,kIAKnDC,mPAOwBC,yDACGC,2EAEhCC,gMAK+BC,4NAMjBC,EAAU,GAAGzB,+SAMV2B,EAAAhC,8SAQH8B,EAAU,GAAGzB,8SAMV2B,EAAAzB,2TAY/BE,EAAUwB,mBAAmB,YAAaF,EAAA,EAQ7BG,CAAWZ,EAAKa,QAExBC,OAAMvC,IACLC,QAAQuC,IAAIxC,EAAA,GACd,GACJ,EAIFyC,OAAOC,iBAAiB,QAAQ,KAG9B,GAFA9B,EAAU+B,UAAY,GACtBhC,EHjGW,CAAAjB,IACX,IACE,MAAME,EAAkBE,aAAa8C,QAAQlD,GAC7C,OAA2B,OAApBE,OAA2BiD,EAAYtD,KAAKC,MAAMI,EAG3D,CAFE,MAAOI,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,QAC3C,GG2Fc4C,CAAkB,YACL,IAAvBnC,EAAY1B,OAGd,OAFA8B,EAAcC,MAAMC,QAAU,YAC9BL,EAAUmC,oBAAoB,QAASC,GAGzC9B,EAAWP,GACXC,EAAU8B,iBAAiB,QAASM,EAAA,IAItC,MAeMA,EAAoBC,IACxB,IAAKA,EAAMC,OAAOC,UAAUC,SAAS,sBACnC,OAjBe,CAAAC,IACjB,MAAMC,EAAgB3C,EAAY4C,QAAQF,GAK1C,GAJA1C,EAAY6C,OAAOF,EAAe,GAClC7D,EAAkB,WAAYkB,GAC9BC,EAAU+B,UAAY,GAEK,IAAvBhC,EAAY1B,OAGd,OAFA8B,EAAcC,MAAMC,QAAU,YAC9BL,EAAUmC,oBAAoB,QAASC,GAGzC9B,EAAWP,EAAA,EASX8C,CADqBR,EAAMC,OAAOQ,QAAQxE,GAC/B,E","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-48c9e8124a560cdc.js","src/js/local-storage.js","node_modules/@parcel/runtime-js/lib/runtime-dc082ffa0fdd1c6a.js","node_modules/@parcel/runtime-js/lib/runtime-25c3fa4effdc13bc.js","src/js/shopping-list.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"29lct\\\":\\\"shopping-list.aabfcc3d.js\\\",\\\"8yB8n\\\":\\\"amazon-light-mode.2bed2965.svg\\\",\\\"1S3Rj\\\":\\\"apple-books.1507f0a5.svg\\\",\\\"bSbOs\\\":\\\"shopping-list.dd91bd91.css\\\",\\\"2hQag\\\":\\\"index.ca7b1b8b.js\\\"}\"));","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Remove state error: ', error.message);\n  }\n};\n\nexport { save, load, remove };\n\n// Jak używać:\n// - zaimportować w swoim pliku js:\n// import * as localStorage from \"/local-storage.js\"\n// - wywołać, przykład:\n// const dog = {\n//   name: \"Mango\",\n//   age: 3,\n//   isHappy: true,\n// };\n\n// localStorage.save(\"dog\", dog);\n// const doggy = localStorage.load(\"dog\");\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8yB8n\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1S3Rj\")).toString();","import * as localStorage from './local-storage.js';\nimport { getBooksApi } from './api.js';\nimport amazonIcon from '/src/images/amazon-light-mode.svg';\nimport appleBooksIcon from '/src/images/apple-books.svg';\n\n// Simulation of adding books to Shopping List (Local Storage) //\n// It will be deleted when adding books Ids to Local Storage from main page will work //\nconst booksIdToLocalStorage = [\n  '643282b1e85766588626a0dc',\n  '643282b1e85766588626a0ba',\n  '643282b1e85766588626a0b8',\n  '643282b1e85766588626a0c2',\n  '643282b1e85766588626a0be',\n  '643282b2e85766588626a110',\n];\nlocalStorage.save('test-Ids', booksIdToLocalStorage);\n// ----------------------------------------------------------- //\n\nlet booksIdList = [];\nconst cardsList = document.querySelector('.cards-list');\nconst shoppingEmpty = document.querySelector('.shopping-empty');\nshoppingEmpty.style.display = 'none';\n\n// Function: Creating book-card markup and adding to DOM //\nconst showMyBook = myBook => {\n  const { _id, book_image, title, list_name, description, author, buy_links } = myBook;\n  const markup = `<li class=\"card-item\">\n        <div class=\"card-item__box\">\n          <div class=\"remove-button\">\n            <button type=\"button\" class=\"remove-button__box\" data-id=\"${_id}\">\n            </button>\n          </div>\n          <div class=\"card-item__img-box\">\n            <img\n              src=\"${book_image}\"\n              alt=\"Book cover\"\n              class=\"card-item__img\"\n            />\n          </div>\n          <div class=\"card-item__info\">\n            <div class=\"card-item__info-body\">\n              <h2 class=\"card-item__title\">${title}</h2>\n              <h3 class=\"card-item__category\">${list_name}</h3>\n              <p class=\"card-item__description\">\n              ${description}\n              </p>\n            </div>\n            <div class=\"card-item__info-footer\">\n              <div class=\"card-item__author-box\">\n                <p class=\"card-item__author\">${author}</p>\n              </div>\n              <div class=\"card-item__shops\">\n                <ul class=\"shops-list\">\n                  <li class=\"shops-list__item\">\n                    <a\n                      href=\"${buy_links[0].url}\"\n                      target=\"_blank\"\n                      rel=\"nofollow noopener noreferrer\"\n                      class=\"shops-list__link\"\n                      ><div class=\"shops-list__icon-box shops-list__icon-box--amazon\">\n                        <img\n                          src=\"${amazonIcon}\"\n                          alt=\"Amazon logo\"\n                          class=\"shops-list__icon-img-amazon\"\n                        /></div\n                    ></a>\n                  </li>\n                  <li class=\"shops-list__item\">\n                    <a\n                      href=\"${buy_links[1].url}\"\n                      target=\"_blank\"\n                      rel=\"nofollow noopener noreferrer\"\n                      class=\"shops-list__link\"\n                      ><div class=\"shops-list__icon-box shops-list__icon-box--apple\">\n                        <img\n                          src=\"${appleBooksIcon}\"\n                          alt=\"Apple Books logo\"\n                          class=\"shops-list__icon-img-apple\"\n                        /></div\n                    ></a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>`;\n  cardsList.insertAdjacentHTML('beforeend', markup);\n};\n\n// Fetch books by IDs from array and render list //\nconst renderList = array => {\n  array.forEach(bookID => {\n    getBooksApi(bookID)\n      .then(book => {\n        return showMyBook(book.data);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  });\n};\n\n// Load / refresh page event listener //\nwindow.addEventListener('load', () => {\n  cardsList.innerHTML = '';\n  booksIdList = localStorage.load('test-Ids'); // <--- change \"key\" - test-Ids\n  if (booksIdList.length === 0) {\n    shoppingEmpty.style.display = 'flex';\n    cardsList.removeEventListener('click', removeCardHandler);\n    return;\n  }\n  renderList(booksIdList);\n  cardsList.addEventListener('click', removeCardHandler);\n});\n\n// Function: remove card by book ID //\nconst removeCard = cardId => {\n  const indexToRemove = booksIdList.indexOf(cardId);\n  booksIdList.splice(indexToRemove, 1);\n  localStorage.save('test-Ids', booksIdList); // <--- change \"key\" - test-Ids\n  cardsList.innerHTML = '';\n\n  if (booksIdList.length === 0) {\n    shoppingEmpty.style.display = 'flex';\n    cardsList.removeEventListener('click', removeCardHandler);\n    return;\n  }\n  renderList(booksIdList);\n};\n\n// Event handler: remove button \"click\" //\nconst removeCardHandler = event => {\n  if (!event.target.classList.contains('remove-button__box')) {\n    return;\n  }\n  const removeCardId = event.target.dataset.id;\n  removeCard(removeCardId);\n};\n"],"names":["$d49cb2d7b03f6a77$export$6503ec6e8aabbaf","$d49cb2d7b03f6a77$export$f7ad0328861e2f03","$d49cb2d7b03f6a77$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$80b576907cf5d791$export$a1544dad697b423d","key","value","serializedState","stringify","localStorage","setItem","error","console","message","$dbca00df9ebb3e88$exports","URL","resolve","import","meta","url","toString","$2cd2469f48b45cbc$exports","$75d8a6bcc5c56d80$var$booksIdList","$75d8a6bcc5c56d80$var$cardsList","document","querySelector","$75d8a6bcc5c56d80$var$shoppingEmpty","style","display","$75d8a6bcc5c56d80$var$renderList","array","forEach","bookID","$lXnOV","getBooksApi","then","book","myBook","_id","book_image","title","list_name","description","author","buy_links","markup","$parcel$interopDefault","insertAdjacentHTML","$75d8a6bcc5c56d80$var$showMyBook","data","catch","log","window","addEventListener","innerHTML","getItem","undefined","$80b576907cf5d791$export$11e63f7b0f3d9900","removeEventListener","$75d8a6bcc5c56d80$var$removeCardHandler","event","target","classList","contains","cardId","indexToRemove","indexOf","splice","$75d8a6bcc5c56d80$var$removeCard","dataset"],"version":3,"file":"shopping-list.aabfcc3d.js.map"}