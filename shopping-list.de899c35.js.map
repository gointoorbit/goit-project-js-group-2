{"mappings":"kpBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,4Q,sBCAzD,I,EAAAC,EAAAJ,EAAA,S,0BCAAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,W,MCA5FC,EAAiB,IAAAN,IAAoBN,EAAA,SAAAO,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,W,iBFO5F,IAAIE,EAAcC,EAAAC,KAAkB,cAAgB,GACpD,MAAMC,EAAYC,SAASC,cAAc,eACnCC,EAAgBF,SAASC,cAAc,mBAC7CC,EAAcC,MAAMC,QAAU,OAG9B,MAmEMC,EAAaC,IACjBA,EAAMC,SAAQC,KACZ,EAAAC,EAAAC,aAAYF,GACTG,MAAKC,GAtEO,CAAAC,IACjB,MAAMC,IAAEA,EAAGC,WAAEA,EAAUC,MAAEA,EAAKC,UAAEA,EAASC,YAAEA,EAAWC,OAAEA,EAAMC,UAAEA,GAAcP,EACxEQ,EAAS,8KAGuDP,kIAKnDC,mPAOwBC,yDACGC,2EAEhCC,gMAK+BC,4NAMjBC,EAAU,GAAG3B,+SAMV6B,EAAAlC,8SAQHgC,EAAU,GAAG3B,8SAMV6B,EAAA3B,2TAY/BI,EAAUwB,mBAAmB,YAAaF,EAAA,EAQ7BG,CAAWZ,EAAKa,QAExBC,OAAMC,IACLL,EAAAnC,GAASyC,OAAOC,QAAQ,uDAC1B,GACJ,EAIFC,OAAOC,iBAAiB,QAAQ,KAG9B,GAFAhC,EAAUiC,UAAY,GACtBpC,EAAcC,EAAAC,KAAkB,aACL,IAAvBF,EAAYjB,OAGd,OAFAuB,EAAcC,MAAMC,QAAU,YAC9BL,EAAUkC,oBAAoB,QAASC,GAGzC7B,EAAWT,GACXG,EAAUgC,iBAAiB,QAASG,EAAA,IAItC,MAeMA,EAAoBC,IACxB,IAAKA,EAAMC,OAAOC,UAAUC,SAAS,sBACnC,OAjBe,CAAAC,IACjB,MAAMC,EAAgB5C,EAAY6C,QAAQF,GAK1C,GAJA3C,EAAY8C,OAAOF,EAAe,GAClC3C,EAAA8C,KAAkB,YAAa/C,GAC/BG,EAAUiC,UAAY,GAEK,IAAvBpC,EAAYjB,OAGd,OAFAuB,EAAcC,MAAMC,QAAU,YAC9BL,EAAUkC,oBAAoB,QAASC,GAGzC7B,EAAWT,EAAA,EASXgD,CADqBT,EAAMC,OAAOS,QAAQjE,GAC/B,GAIb,EAAAkE,EAAAC,mB","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-8f77d8b956f34fe3.js","src/js/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-dc082ffa0fdd1c6a.js","node_modules/@parcel/runtime-js/lib/runtime-25c3fa4effdc13bc.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"29lct\\\":\\\"shopping-list.de899c35.js\\\",\\\"8yB8n\\\":\\\"amazon-light-mode.2bed2965.svg\\\",\\\"1S3Rj\\\":\\\"apple-books.1507f0a5.svg\\\",\\\"bSbOs\\\":\\\"shopping-list.d033146c.css\\\",\\\"d6VAr\\\":\\\"index.3d4f3384.js\\\"}\"));","import Notiflix from 'notiflix';\nimport * as localStorage from './local-storage.js';\nimport { getBooksApi } from './api.js';\nimport amazonIcon from '/src/images/amazon-light-mode.svg';\nimport appleBooksIcon from '/src/images/apple-books.svg';\nimport {updateBookCount} from './book-count.js';  \n\nlet booksIdList = localStorage.load('myBooksId') || [];\nconst cardsList = document.querySelector('.cards-list');\nconst shoppingEmpty = document.querySelector('.shopping-empty');\nshoppingEmpty.style.display = 'none';\n\n// Function: Creating book-card markup and adding to DOM //\nconst showMyBook = myBook => {\n  const { _id, book_image, title, list_name, description, author, buy_links } = myBook;\n  const markup = `<li class=\"card-item\">\n        <div class=\"card-item__box\">\n          <div class=\"remove-button\">\n            <button type=\"button\" class=\"remove-button__box\" data-id=\"${_id}\">\n            </button>\n          </div>\n          <div class=\"card-item__img-box\">\n            <img\n              src=\"${book_image}\"\n              alt=\"Book cover\"\n              class=\"card-item__img\"\n            />\n          </div>\n          <div class=\"card-item__info\">\n            <div class=\"card-item__info-body\">\n              <h2 class=\"card-item__title\">${title}</h2>\n              <h3 class=\"card-item__category\">${list_name}</h3>\n              <p class=\"card-item__description\">\n              ${description}\n              </p>\n            </div>\n            <div class=\"card-item__info-footer\">\n              <div class=\"card-item__author-box\">\n                <p class=\"card-item__author\">${author}</p>\n              </div>\n              <div class=\"card-item__shops\">\n                <ul class=\"shops-list\">\n                  <li class=\"shops-list__item\">\n                    <a\n                      href=\"${buy_links[0].url}\"\n                      target=\"_blank\"\n                      rel=\"nofollow noopener noreferrer\"\n                      class=\"shops-list__link\"\n                      ><div class=\"shops-list__icon-box shops-list__icon-box--amazon\">\n                        <img\n                          src=\"${amazonIcon}\"\n                          alt=\"Amazon logo\"\n                          class=\"shops-list__icon-img-amazon\"\n                        /></div\n                    ></a>\n                  </li>\n                  <li class=\"shops-list__item\">\n                    <a\n                      href=\"${buy_links[1].url}\"\n                      target=\"_blank\"\n                      rel=\"nofollow noopener noreferrer\"\n                      class=\"shops-list__link\"\n                      ><div class=\"shops-list__icon-box shops-list__icon-box--apple\">\n                        <img\n                          src=\"${appleBooksIcon}\"\n                          alt=\"Apple Books logo\"\n                          class=\"shops-list__icon-img-apple\"\n                        /></div\n                    ></a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>`;\n  cardsList.insertAdjacentHTML('beforeend', markup);\n};\n\n// Fetch books by IDs from array and render list //\nconst renderList = array => {\n  array.forEach(bookID => {\n    getBooksApi(bookID)\n      .then(book => {\n        return showMyBook(book.data);\n      })\n      .catch(error => {\n        Notiflix.Notify.failure('Ooops... Something went wrong! Please, try again.');\n      });\n  });\n};\n\n// Load / refresh page event listener //\nwindow.addEventListener('load', () => {\n  cardsList.innerHTML = '';\n  booksIdList = localStorage.load('myBooksId'); // <--- \"key\"\n  if (booksIdList.length === 0) {\n    shoppingEmpty.style.display = 'flex';\n    cardsList.removeEventListener('click', removeCardHandler);\n    return;\n  }\n  renderList(booksIdList);\n  cardsList.addEventListener('click', removeCardHandler);\n});\n\n// Function: remove card by book ID //\nconst removeCard = cardId => {\n  const indexToRemove = booksIdList.indexOf(cardId);\n  booksIdList.splice(indexToRemove, 1);\n  localStorage.save('myBooksId', booksIdList); // <--- \"key\"\n  cardsList.innerHTML = '';\n\n  if (booksIdList.length === 0) {\n    shoppingEmpty.style.display = 'flex';\n    cardsList.removeEventListener('click', removeCardHandler);\n    return;\n  }\n  renderList(booksIdList);\n};\n\n// Event handler: remove button \"click\" //\nconst removeCardHandler = event => {\n  if (!event.target.classList.contains('remove-button__box')) {\n    return;\n  }\n  const removeCardId = event.target.dataset.id;\n  removeCard(removeCardId);\n};\n\n// book counting function\nupdateBookCount();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8yB8n\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1S3Rj\")).toString();"],"names":["$d49cb2d7b03f6a77$export$6503ec6e8aabbaf","$d49cb2d7b03f6a77$export$f7ad0328861e2f03","$d49cb2d7b03f6a77$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$7IoHk","$dbca00df9ebb3e88$exports","URL","resolve","import","meta","url","toString","$2cd2469f48b45cbc$exports","$75d8a6bcc5c56d80$var$booksIdList","$b374K","load","$75d8a6bcc5c56d80$var$cardsList","document","querySelector","$75d8a6bcc5c56d80$var$shoppingEmpty","style","display","$75d8a6bcc5c56d80$var$renderList","array","forEach","bookID","$lXnOV","getBooksApi","then","book","myBook","_id","book_image","title","list_name","description","author","buy_links","markup","$parcel$interopDefault","insertAdjacentHTML","$75d8a6bcc5c56d80$var$showMyBook","data","catch","error","Notify","failure","window","addEventListener","innerHTML","removeEventListener","$75d8a6bcc5c56d80$var$removeCardHandler","event","target","classList","contains","cardId","indexToRemove","indexOf","splice","save","$75d8a6bcc5c56d80$var$removeCard","dataset","$IsBYg","updateBookCount"],"version":3,"file":"shopping-list.de899c35.js.map"}