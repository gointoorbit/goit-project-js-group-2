function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},s=o.parcelRequire8462;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in t){var o=t[e];delete t[e];var s={id:e,exports:{}};return n[e]=s,o.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,o){t[e]=o},o.parcelRequire8462=s),s("ifJdc").register(JSON.parse('{"eFRlh":"index.f9249025.js","8yB8n":"amazon-light-mode.2bed2965.svg","1S3Rj":"apple-books.1507f0a5.svg","bSbOs":"shopping-list.7055951e.css","jwZMh":"index.653624fd.js"}')),s("lXnOV"),s("kM5jX");var i,a=s("b374K"),l=s("lXnOV");i=new URL(s("ifJdc").resolve("8yB8n"),import.meta.url).toString();var d;d=new URL(s("ifJdc").resolve("1S3Rj"),import.meta.url).toString();const c=document.querySelector(".modal-card"),r=document.querySelector(".books__list");let _=a.load("myBooksId")||[],m=document.querySelector(".modal-card__close-box")||null;const p=()=>{c.innerHTML="",m.removeEventListener("click",p),window.removeEventListener("keydown",g),window.removeEventListener("click",u)},g=e=>{"Escape"===e.key&&(c.innerHTML="",window.removeEventListener("keydown",g),m.removeEventListener("click",p),window.removeEventListener("click",u))},u=e=>{e.target.classList.contains("modal-card__backdrop")&&(c.innerHTML="",window.removeEventListener("click",u),window.removeEventListener("keydown",g),m.removeEventListener("click",p))},v=e=>{const o=e.target.dataset.modalid;_=a.load("myBooksId")||[];const n=document.querySelector(".button-shopping__content"),t=document.querySelector(".modal-card__congrats");if(-1===_.indexOf(o))return _.push(o),a.save("myBooksId",_),n.textContent="Remove from the shopping list",void(t.style.display="inline");if(-1!==_.indexOf(o)){const e=_.indexOf(o);return _.splice(e,1),a.save("myBooksId",_),n.textContent="Add to shopping list",void(t.style.display="none")}},b=o=>{const{_id:n,book_image:t,title:s,description:l,author:r,buy_links:b}=o,h=`<div class="modal-card__backdrop">\n    <div class="modal-card__box">\n      <div class="modal-card__close">\n        <button type="button" class="modal-card__close-box"></button>\n      </div>\n      <div class="modal-card__img-box">\n        <img\n          src="${t}"\n          alt="Book\n        cover"\n          class="modal-card__img"\n        />\n      </div>\n      <div class="modal-card__info">\n        <div class="modal-card__info-body">\n          <h2 class="modal-card__title">${s}</h2>\n          <h3 class="modal-card__author">${r}</h3>\n          <p class="modal-card__description">${l}</p>\n        </div>\n        <div class="modal-card__shops">\n          <ul class="shops-list modal">\n            <li class="shops-list__item modal">\n              <a\n                href="${b[0].url}"\n                target="_blank"\n                rel="nofollow noopener noreferrer"\n                class="shops-list__link modal"\n                ><div class="shops-list__icon-box shops-list__icon-box--amazon modal">\n                  <img\n                    src="${e(i)}"\n                    alt="Amazon logo"\n                    class="shops-list__icon-img-amazon modal"\n                  /></div\n              ></a>\n            </li>\n            <li class="shops-list__item modal">\n              <a\n                href="${b[1].url}"\n                target="_blank"\n                rel="nofollow noopener noreferrer"\n                class="shops-list__link modal"\n                ><div class="shops-list__icon-box shops-list__icon-box--apple modal">\n                  <img\n                    src="${e(d)}"\n                    alt="Apple Books logo"\n                    class="shops-list__icon-img-apple modal"\n                  /></div\n              ></a>\n            </li>\n          </ul>\n        </div>\n        <div class="button-shopping">\n          <button class="button-shopping__content" data-modalid="${n}">add to shopping list</button>\n        </div>\n        <div class="modal-card__congrats">\n          <p class="modal-card__congrats-text">\n            Congratulations! You have added the book to the shopping list. To delete, press the\n            button "Remove from the shopping list".\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>`;c.insertAdjacentHTML("beforeend",h),m=document.querySelector(".modal-card__close-box"),m.addEventListener("click",p),window.addEventListener("keydown",g),window.addEventListener("click",u),(e=>{const o=document.querySelector(".button-shopping__content"),n=document.querySelector(".modal-card__congrats");_=a.load("myBooksId")||[],-1===_.indexOf(e)?(o.textContent="Add to shopping list",n.style.display="none"):-1!==_.indexOf(e)&&(o.textContent="Remove from the shopping list",n.style.display="inline")})(n);document.querySelector(".button-shopping__content").addEventListener("click",v)};r.addEventListener("click",(e=>{if(e.target.classList.contains("books__list--image")||e.target.classList.contains("books__list--title")){const n=e.target.dataset.mainid;c.innerHTML="",o=n,(0,l.getBooksApi)(o).then((e=>b(e.data))).catch((e=>{console.log(e)}))}var o})),s("a7nVE"),s("3dMYq");l=s("lXnOV");const h=document.querySelector(".books__categories ul"),k=document.querySelector(".books__header"),f=document.querySelector(".books__list");let y,L;const w=e=>{const o=e.split(" "),n=o.pop(),t=o.join(" ");k.innerHTML=`${t} \n        <span class="books__header--color">\n\n        ${n}</span>`},E=e=>{var o;o=e,y&&y.classList.remove("change-category-color"),o.classList.add("change-category-color"),y=o,"All categories"===e.innerHTML?(L=l.topBooks,(0,l.getBooksApi)(L).then((e=>{console.log(e.data),console.log(window.screen.width),window.screen.width<=768?$(e.data,1):window.screen.width<=1440?$(e.data,3):$(e.data,5)}))):H(e.innerHTML)};h.addEventListener("click",(()=>E(event.target))),(0,l.getBooksApi)(l.categoryList).then((e=>x(e.data))).catch((e=>{console.log(e)}));const x=e=>{e.forEach((e=>{const o=document.createElement("li");h.append(o),o.classList.add("books__categories--item"),o.innerHTML=`${e.list_name}`})),h.addEventListener("click",(()=>E(event.target)))},H=e=>{L=`category?category=${e}`,(0,l.getBooksApi)(L).then((e=>S(e)))},S=e=>{w(e.data[0].list_name),f.innerHTML="",e.data.forEach((e=>{const o=document.createElement("li");f.append(o),o.innerHTML=`\n        <div class='books__list--card'><img src="${e.book_image}" class='books__list--image'/>\n        <div class='books__list--description'>\n        <span class='books__list--title'>${e.title}</span>\n        <br/>\n        <span class='books__list--author'>${e.author}</span>\n        </div>\n        </div>`}))};E(h.firstElementChild);const $=(e,o)=>{w("Best Sellers Books"),f.innerHTML="";for(const n of e){const e=document.createElement("div");f.append(e),e.classList.add("books__list--category"),e.insertAdjacentHTML("beforeend",`<span class="books__list--category-name">${n.list_name}</span><ul class="books__list--category-set"></ul><div class'books__list--category-see-more'><button class='see-more-btn'>see more</button></div>`),console.log(n.list_name);let t=n.books.slice(0,o);console.log(o),console.log(t);for(const e of t){let o=document.querySelectorAll(".books__list--category-set");o[o.length-1].insertAdjacentHTML("beforeend",`<li class="books__list--element-info"><img data-mainId='${e._id}' class='books__list--image' src="${e.book_image}"/><div class="books__list--element-description"><span data-mainId='${e._id}' class="books__list--title">${e.title}</span><br/><span class="books__list--author">${e.author}</span></div></li>`)}}};document.addEventListener("click",(function(e){const o=e.target.closest(".see-more-btn");if(o){const e=o.parentNode.parentNode.firstElementChild.innerHTML;H(e)}}));
//# sourceMappingURL=index.f9249025.js.map
