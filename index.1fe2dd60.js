function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},s=n.parcelRequire8462;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var s={id:e,exports:{}};return t[e]=s,n.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){o[e]=n},n.parcelRequire8462=s),s("ifJdc").register(JSON.parse('{"eFRlh":"index.1fe2dd60.js","8yB8n":"amazon-light-mode.2bed2965.svg","1S3Rj":"apple-books.1507f0a5.svg","bSbOs":"shopping-list.136a1270.css","fjk2K":"index.8b082870.js"}')),s("lXnOV"),s("kM5jX");var i,a=s("7IoHk"),r=s("b374K"),l=s("lXnOV");i=new URL(s("ifJdc").resolve("8yB8n"),import.meta.url).toString();var c;c=new URL(s("ifJdc").resolve("1S3Rj"),import.meta.url).toString();const d=document.querySelector(".modal-card"),_=document.querySelector(".books__list");let u=r.load("myBooksId")||[],m=document.querySelector(".modal-card__close-box")||null;const p=()=>{d.innerHTML="",m.removeEventListener("click",p),window.removeEventListener("keydown",f),window.removeEventListener("click",v)},f=e=>{"Escape"===e.key&&(d.innerHTML="",window.removeEventListener("keydown",f),m.removeEventListener("click",p),window.removeEventListener("click",v))},v=e=>{e.target.classList.contains("modal-card__backdrop")&&(d.innerHTML="",window.removeEventListener("click",v),window.removeEventListener("keydown",f),m.removeEventListener("click",p))},b=e=>{const n=e.target.dataset.modalid;u=r.load("myBooksId")||[];const t=document.querySelector(".button-shopping__content"),o=document.querySelector(".modal-card__congrats");if(-1===u.indexOf(n))return u.push(n),r.save("myBooksId",u),t.textContent="Remove from the shopping list",void(o.style.display="inline");if(-1!==u.indexOf(n)){const e=u.indexOf(n);return u.splice(e,1),r.save("myBooksId",u),t.textContent="Add to shopping list",void(o.style.display="none")}},g=n=>{const{_id:t,book_image:o,title:s,description:a,author:l,buy_links:_}=n,g=`<div class="modal-card__backdrop">\n    <div class="modal-card__box">\n      <div class="modal-card__close">\n        <button type="button" class="modal-card__close-box"></button>\n      </div>\n      <div class="modal-card__img-box">\n        <img\n          src="${o}"\n          alt="Book\n        cover"\n          class="modal-card__img"\n        />\n      </div>\n      <div class="modal-card__info">\n        <div class="modal-card__info-body">\n          <h2 class="modal-card__title">${s}</h2>\n          <h3 class="modal-card__author">${l}</h3>\n          <p class="modal-card__description">${a}</p>\n        </div>\n        <div class="modal-card__shops">\n          <ul class="shops-list modal">\n            <li class="shops-list__item modal">\n              <a\n                href="${_[0].url}"\n                target="_blank"\n                rel="nofollow noopener noreferrer"\n                class="shops-list__link modal"\n                ><div class="shops-list__icon-box shops-list__icon-box--amazon modal">\n                  <img\n                    src="${e(i)}"\n                    alt="Amazon logo"\n                    class="shops-list__icon-img-amazon modal"\n                  /></div\n              ></a>\n            </li>\n            <li class="shops-list__item modal">\n              <a\n                href="${_[1].url}"\n                target="_blank"\n                rel="nofollow noopener noreferrer"\n                class="shops-list__link modal"\n                ><div class="shops-list__icon-box shops-list__icon-box--apple modal">\n                  <img\n                    src="${e(c)}"\n                    alt="Apple Books logo"\n                    class="shops-list__icon-img-apple modal"\n                  /></div\n              ></a>\n            </li>\n          </ul>\n        </div>\n        <div class="button-shopping">\n          <button class="button-shopping__content" data-modalid="${t}">add to shopping list</button>\n        </div>\n        <div class="modal-card__congrats">\n          <p class="modal-card__congrats-text">\n            Congratulations! You have added the book to the shopping list. To delete, press the\n            button "Remove from the shopping list".\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>`;d.insertAdjacentHTML("beforeend",g),m=document.querySelector(".modal-card__close-box"),m.addEventListener("click",p),window.addEventListener("keydown",f),window.addEventListener("click",v),(e=>{const n=document.querySelector(".button-shopping__content"),t=document.querySelector(".modal-card__congrats");u=r.load("myBooksId")||[],-1===u.indexOf(e)?(n.textContent="Add to shopping list",t.style.display="none"):-1!==u.indexOf(e)&&(n.textContent="Remove from the shopping list",t.style.display="inline")})(t);document.querySelector(".button-shopping__content").addEventListener("click",b)};_.addEventListener("click",(n=>{if(n.target.classList.contains("books__list--image")||n.target.classList.contains("books__list--title")){const o=n.target.dataset.mainid;d.innerHTML="",t=o,(0,l.getBooksApi)(t).then((e=>g(e.data))).catch((n=>{e(a).Notify.failure("Ooops... Something went wrong! Please, try again.")}))}var t})),s("a7nVE"),s("3dMYq");l=s("lXnOV");var h,y="Expected a function",k=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,E=/^0o[0-7]+$/i,x=parseInt,S="object"==typeof n&&n&&n.Object===Object&&n,$="object"==typeof self&&self&&self.Object===Object&&self,H=S||$||Function("return this")(),T=Object.prototype.toString,M=Math.max,O=Math.min,j=function(){return H.Date.now()};function A(e,n,t){var o,s,i,a,r,l,c=0,d=!1,_=!1,u=!0;if("function"!=typeof e)throw new TypeError(y);function m(n){var t=o,i=s;return o=s=void 0,c=n,a=e.apply(i,t)}function p(e){return c=e,r=setTimeout(v,n),d?m(e):a}function f(e){var t=e-l;return void 0===l||t>=n||t<0||_&&e-c>=i}function v(){var e=j();if(f(e))return b(e);r=setTimeout(v,function(e){var t=n-(e-l);return _?O(t,i-(e-c)):t}(e))}function b(e){return r=void 0,u&&o?m(e):(o=s=void 0,a)}function g(){var e=j(),t=f(e);if(o=arguments,s=this,l=e,t){if(void 0===r)return p(l);if(_)return r=setTimeout(v,n),m(l)}return void 0===r&&(r=setTimeout(v,n)),a}return n=B(n)||0,q(t)&&(d=!!t.leading,i=(_="maxWait"in t)?M(B(t.maxWait)||0,n):i,u="trailing"in t?!!t.trailing:u),g.cancel=function(){void 0!==r&&clearTimeout(r),c=0,o=l=s=r=void 0},g.flush=function(){return void 0===r?a:b(j())},g}function q(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function B(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==T.call(e)}(e))return NaN;if(q(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=q(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(k,"");var t=L.test(e);return t||E.test(e)?x(e.slice(2),t?2:8):w.test(e)?NaN:+e}h=function(e,n,t){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError(y);return q(t)&&(o="leading"in t?!!t.leading:o,s="trailing"in t?!!t.trailing:s),A(e,n,{leading:o,maxWait:n,trailing:s})};const R=document.querySelector(".books__categories ul"),I=document.querySelector(".books__header"),N=document.querySelector(".books__list");let C,F,z;const J=e=>{C&&C.classList.remove("change-category-color"),e.classList.add("change-category-color"),C=e},U=e=>{const n=e.split(" "),t=n.pop(),o=n.join(" ");I.innerHTML=`${o} \n        <span class="books__header--color">\n\n        ${t}</span>`};(async()=>{const e=await(0,l.getBooksApi)(l.categoryList);V(e.data)})();const V=e=>{e.forEach((e=>{const n=document.createElement("li");R.append(n),n.classList.add("books__categories--item"),n.innerHTML=`${e.list_name}`})),R.addEventListener("click",(()=>X(event.target)))},X=n=>{J(n),"All categories"===n.innerHTML?(K(),window.addEventListener("resize",e(h)(P,250))):(window.removeEventListener("resize",e(h)(P,250)),D(n.innerHTML))},D=async e=>{for(const n of R.children)n.innerHTML===e&&J(n);F=`category?category=${e}`;const n=await(0,l.getBooksApi)(F);return W(n)},W=e=>{U(e.data[0].list_name),N.innerHTML="",e.data.forEach((e=>{const n=document.createElement("li");N.append(n),n.innerHTML=`\n        <div class="books__list--card"><img data-mainId="${e._id}" src="${e.book_image}" class="books__list--image"/>\n        <div class="books__list--description">\n        <span data-mainId="${e._id}" class="books__list--title">${e.title}</span>\n        <br/>\n        <span class="books__list--author">${e.author}</span>\n        </div>\n        </div>`}))},K=async()=>{J(R.firstElementChild);const e=await(0,l.getBooksApi)(l.topBooks);return z=e.data,P(z),z},Y=(e,n)=>{U("Best Sellers Books"),N.innerHTML="";for(const t of e){const e=document.createElement("div");N.append(e),e.classList.add("books__list--category"),e.insertAdjacentHTML("beforeend",`<span class="books__list--category-name">${t.list_name}</span><ul class="books__list--category-set"></ul><div class='books__list--category-see-more'><button class='see-more-btn'>see more</button></div>`);let o=t.books.slice(0,n);for(const e of o){let n=document.querySelectorAll(".books__list--category-set");n[n.length-1].insertAdjacentHTML("beforeend",`<li class="books__list--element-info"><img data-mainId="${e._id}" class="books__list--image" src="${e.book_image}"/><div class="books__list--element-description"><span data-mainId="${e._id}" class="books__list--title">${e.title}</span><br/><span class="books__list--author">${e.author}</span></div></li>`)}}},P=()=>window.screen.width<=768?Y(z,1):window.screen.width<=1440?Y(z,3):Y(z,5);X(R.firstElementChild),document.addEventListener("click",(function(n){const t=n.target.closest(".see-more-btn");if(t){const n=t.parentNode.parentNode.firstElementChild.innerHTML;window.removeEventListener("resize",e(h)(P,250)),D(n)}}));
//# sourceMappingURL=index.1fe2dd60.js.map
